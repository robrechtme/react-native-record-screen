{"version":3,"sources":["index.tsx"],"names":["RecordScreen","NativeModules","RS","ReactNativeRecordScreenClass","setup","config","width","height","Dimensions","get","mic","fps","bitrate","startRecording","stopRecording","clean","ReactNativeRecordScreen"],"mappings":";;;;;;;AAAA;;AAmCA,MAAM;AAAEA,EAAAA;AAAF,IAAmBC,0BAAzB;AAEA,MAAMC,EAAE,GAAGF,YAAX;;AAEA,MAAMG,4BAAN,CAAmC;AACzBC,EAAAA,KAAK,GAA4C;AAAA,QAA3CC,MAA2C,uEAAV,EAAU;;AACvD,UAAM;AAAEC,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAoBC,wBAAWC,GAAX,CAAe,QAAf,CAA1B;;AACAP,IAAAA,EAAE,CAACE,KAAH,CAAS;AACPM,MAAAA,GAAG,EAAE,IADE;AAEPJ,MAAAA,KAFO;AAGPC,MAAAA,MAHO;AAIPI,MAAAA,GAAG,EAAE,EAJE;AAKPC,MAAAA,OAAO,EAAE,OAAO,IAAP,GAAc,GALhB;AAMP,SAAGP;AANI,KAAT;AAQD;;AAEDQ,EAAAA,cAAc,GAAsC;AAAA,QAArCR,MAAqC,uEAAJ,EAAI;AAClD,SAAKD,KAAL,CAAWC,MAAX;AACA,WAAOH,EAAE,CAACW,cAAH,EAAP;AACD;;AAEDC,EAAAA,aAAa,GAAG;AACd,WAAOZ,EAAE,CAACY,aAAH,EAAP;AACD;;AAEDC,EAAAA,KAAK,GAAG;AACN,WAAOb,EAAE,CAACa,KAAH,EAAP;AACD;;AAxBgC;;AA2BnC,MAAMC,uBAAuB,GAAG,IAAIb,4BAAJ,EAAhC;eAEea,uB","sourcesContent":["import { NativeModules, Dimensions } from 'react-native';\n\nexport type RecordingStartResponse = 'started' | 'permission_error';\n\nexport type RecordScreenConfigType = {\n  width?: number;\n  height?: number;\n  fps?: number;\n  bitrate?: number;\n  mic?: boolean;\n};\n\nexport type RecordingSuccessResponse = {\n  status: 'success';\n  result: {\n    outputURL: string;\n  };\n};\n\nexport type RecordingErrorResponse = {\n  status: 'error';\n  result: unknown;\n};\n\nexport type RecordingResponse =\n  | RecordingSuccessResponse\n  | RecordingErrorResponse;\n\ntype RecordScreenNativeModule = {\n  setup(config: RecordScreenConfigType): void;\n  startRecording(): Promise<RecordingStartResponse>;\n  stopRecording(): Promise<RecordingResponse>;\n  clean(): Promise<string>;\n};\n\nconst { RecordScreen } = NativeModules;\n\nconst RS = RecordScreen as RecordScreenNativeModule;\n\nclass ReactNativeRecordScreenClass {\n  private setup(config: RecordScreenConfigType = {}): void {\n    const { width, height } = Dimensions.get('window');\n    RS.setup({\n      mic: true,\n      width,\n      height,\n      fps: 60,\n      bitrate: 1920 * 1080 * 144,\n      ...config,\n    });\n  }\n\n  startRecording(config: RecordScreenConfigType = {}) {\n    this.setup(config);\n    return RS.startRecording();\n  }\n\n  stopRecording() {\n    return RS.stopRecording();\n  }\n\n  clean() {\n    return RS.clean();\n  }\n}\n\nconst ReactNativeRecordScreen = new ReactNativeRecordScreenClass();\n\nexport default ReactNativeRecordScreen;\n"]}